var main=document.getElementById("content_wrap"),nav=document.getElementById("nav_wrap"),controller=null;function getPage(t){t.preventDefault(),t.stopImmediatePropagation(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=t.target.hasAttribute("data-page")?t.target:get_closest_parent(t.target,"[data-page]"),n=wpApiSettings.root+"page/",r=o.dataset.page,a=document.querySelector("body[data-u]").dataset.u,s={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({u:a,page:r})};callLoading("on"),fetch(n,s).then(function(t){if(callLoading("off","on"),t.ok)return t.json();throw new Error(t.statusText)}).then(function(t){console.log(t),main.innerHTML=t.html,nav.innerHTML=t.nav,addListener("[data-page]","click",getPage),addListener("[data-archive]","click",getArchive),setWindowHistory(t.title,t.perma,n,s),select2dropDown(),bsValidatorInit(),getValidateEmailUrl(),removeClasse(nav,"relative-header")}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function registerUser(t){t.preventDefault(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=document.getElementById("formRegister").elements,n=document.querySelector("body[data-u]").dataset.u,r=wpApiSettings.root+"register/",a={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.username.value,password:o.password.value,fullname:o.fullname.value,number:o.number.value,email:o.email.value,bdate:o.bdate.value,u:n})};callLoading("on"),fetch(r,a).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){console.log(t),window.history.pushState("","",t.url),window.location.reload(),toastInit("success_toast",t.message)}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function loginUser(t){t.preventDefault(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=document.getElementById("formLogin").elements,n=wpApiSettings.root+"login/",r={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.username.value,password:o.password.value})};callLoading("on"),fetch(n,r).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){console.log(t),t.data&&200!==t.data.status?toastInit("error_toast",t.message):t.url&&(toastInit("success_toast",t.message),window.history.pushState("","",t.url),window.location.reload())}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function logoutUser(t){t.preventDefault(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=document.querySelector("body[data-u]").dataset.u,n=wpApiSettings.root+"logout/",r={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({u:o})};callLoading("on"),fetch(n,r).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){console.log(t),t.url&&(document.location.replace(t.url),toastInit("success_toast",t.message))}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function createPost(t){t.preventDefault(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=get_closest_parent(t.target,"#NewPost").querySelector(".tab-pane.active form");if(jQuery(o).data("bootstrapValidator").validate(),jQuery(o).data("bootstrapValidator").isValid()){for(var n=o.elements,r=o.dataset.post,a=document.querySelector("body[data-u]").dataset.u,s=wpApiSettings.root+"create-post/",i={post:r,u:a},l=n.length-1;0<=l;l--)if("submit"!==n[l].type&&"search"!==n[l].type&&"select-multiple"!==n[l].type)i[n[l].name]=n[l].value;else if("select-multiple"==n[l].type){for(var c=n[l],d=[],u=0;u<c.options.length;u++)opt=c.options[u],opt_info={},opt.selected&&(opt_info.value=opt.value,opt_info.new=!!opt.dataset.select2Tag,d.push(opt_info));i.tags=d}var p={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify(i)};jQuery("#NewPost").modal("hide"),fetch(s,p).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){t.data&&200!==t.data.status?toastInit("error_toast",t.message):(main.innerHTML=t.html,nav.innerHTML=t.nav,setWindowHistory(t.title,t.perma,s,p),addListener("[data-page]","click",getPage),addListener(".publish-post","click",publishPost),t.activity&&activityCreation(),jQuery("footer").addClass("d-none"),tinyInit(),select2dropDown(),jQuery("body").addClass("fixed-sidebar"),jQuery(".container-post-wrapper").hasClass("activity-content")||jQuery(".btn-days_wrapper a.tab").click(),toastInit("success_toast",t.message))}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}}function accSetting(t){t.preventDefault(),controller&&controller.abort();(controller=new AbortController).signal;var e=get_closest_parent(t.target,"#settings").querySelector("form");jQuery(e).data("bootstrapValidator").validate(),jQuery(e).data("bootstrapValidator").isValid()&&console.log("valid")}function createGroup(t){t.preventDefault(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=t.target,n=new FormData,r=o.querySelector('select[name="members"]'),a=o.querySelector('select[name="admins"]');n.append("u",document.querySelector("body[data-u]").dataset.u),n.append("title",o.querySelector('input[name="title"]').value),n.append("desc",o.querySelector('textarea[name="desc"]').value),0!==window.groupPhoto.getFiles().length?n.append("groupPhoto",window.groupPhoto.getFiles()[0].data):n.append("groupPhoto",!1);for(var s=0;s<r.options.length;s++){(i=r.options[s]).selected&&n.append("members[]",i.value)}for(s=0;s<a.options.length;s++){var i;(i=a.options[s]).selected&&n.append("admins[]",i.value)}document.querySelector("body[data-u]").dataset.u;var l=wpApiSettings.root+"create-group/",c={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,body:n};fetch(l,c).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){console.log(t),jQuery("#newGroup").modal("hide"),main.innerHTML=t.html,setWindowHistory(t.title,t.perma,l,c),toastInit("success_toast",t.message)}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function updateGroup(t){t.preventDefault(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=t.target,n=new FormData,r=o.querySelector('select[name="members"]'),a=o.querySelector('select[name="admins"]');n.append("u",document.querySelector("body[data-u]").dataset.u),n.append("g",o.dataset.g),n.append("title",o.querySelector('input[name="title"]').value),n.append("desc",o.querySelector('textarea[name="desc"]').value),window.groupPhotoPreview&&0!==window.groupPhotoPreview.getFiles().length?n.append("groupPhoto",window.groupPhotoPreview.getFiles()[0].data):n.append("groupPhoto",!1);for(var s=0;s<r.options.length;s++){(i=r.options[s]).selected&&n.append("members[]",i.value)}for(s=0;s<a.options.length;s++){var i;(i=a.options[s]).selected&&n.append("admins[]",i.value)}document.querySelector("body[data-u]").dataset.u;var l=wpApiSettings.root+"update-group/";fetch(l,{method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,body:n}).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){t.data&&200!==t.data.status?toastInit("error_toast",t.message):toastInit("success_toast",t.message)}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function publishWorkshop(t){t.preventDefault(),controller&&controller.abort();for(var e=(controller=new AbortController).signal,o=document.getElementById("formPublishWorkshop").elements,n=document.getElementById("formPublishWorkshop").dataset.post,r={},a=document.querySelectorAll(".btn-days_wrapper a.btn:not(.tab)"),s={},i=document.querySelectorAll(".workshop-content_wrapper .workshop_partition_content"),l=wpApiSettings.root+"publish-post/",c={post:n,u:document.querySelector("body[data-u]").dataset.u},d=o.length-1;0<=d;d--)if("submit"!==o[d].type&&"search"!==o[d].type&&"select-multiple"!==o[d].type)c[o[d].name]=o[d].value;else if("select-multiple"==o[d].type){for(var u=o[d],p=[],g=0;g<u.options.length;g++)opt=u.options[g],opt.selected&&p.push(opt.value);c[o[d].name]=p}if(0!==a.length){for(d=a.length-1;0<=d;d--){var m=a[d].dataset.post?a[d].dataset.post:0,h=a[d].innerText;r[a[d].getAttribute("aria-controls")]={post:m,title:h}}c.days=r}if(0!==i.length){for(d=i.length-1;0<=d;d--){var f=i[d].dataset.post?i[d].dataset.post:0,y=get_closest_parent(i[d],".tab-pane").dataset.post?get_closest_parent(i[d],".tab-pane").dataset.post:get_closest_parent(i[d],".tab-pane").getAttribute("id"),b=i[d].querySelector(".header div:first-child span").innerText,v=i[d].getAttribute("id"),w=i[d].getAttribute("class").replace("workshop_partition_content",""),S=i[d].querySelectorAll("form .row"),k=[];if(0!==S.length)for(g=S.length-1;0<=g;g--){var _=S[g].querySelector("input.workshop-input_number").value,A=S[g].querySelector("textarea.workshop-input_title").value,L=S[g].querySelector("textarea.workshop-input_content").value,P=S[g].querySelector("textarea.workshop-input_notes").value;k[g]={title:A,desc:L,duration:_,note:P}}s[v]={post:f,parent:y,title:b,color:w,steps:k,order:d}}c.entries=s}var T={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify(c)};callLoading("on"),fetch(l,T).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){console.log(t),jQuery("#editWorkShop").modal("hide"),toastInit("success_toast",t.message),removeClasse(document.querySelector("body"),"fixed-sidebar"),main.innerHTML=t.html,nav.innerHTML=t.nav,setWindowHistory(t.title,t.perma,l,T),addListener(".get-profile","click",getProfile),addListener("[data-archive]","click",getArchive),addListener(".bookmark","click",bookmarkPost),addListener(".get-post","click",getPost),addListener(".logout","click",logoutUser),addListener(".create-post","click",createPost),avatarInit(),select2dropDown(),bsValidatorInit()}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function publishPost(t){t.preventDefault(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=0!==jQuery("textarea#tiny").length&&jQuery("textarea#tiny").tinymce(),n={},r=document.querySelectorAll(".right-side_info .article-title"),a={},s=document.querySelectorAll(".btn-days_wrapper a.btn:not(.tab)"),i={},l=document.querySelectorAll(".workshop-content_wrapper .workshop_partition_content");if(0!==r.length)for(var c=r.length-1;0<=c;c--)r[c].dataset.target&&(n[r[c].dataset.target]=r[c].textContent);if(0!==s.length)for(c=s.length-1;0<=c;c--){var d=s[c].dataset.post?s[c].dataset.post:0,u=s[c].innerText;a[s[c].getAttribute("aria-controls")]={post:d,title:u}}if(0!==l.length)for(c=l.length-1;0<=c;c--){var p=l[c].dataset.post?l[c].dataset.post:get_closest_parent(l[c],".container-post__center").dataset.post,g=get_closest_parent(l[c],".tab-pane")?get_closest_parent(l[c],".tab-pane").dataset.post:0,m=l[c].querySelector(".header div:first-child span").innerText,h=l[c].getAttribute("id"),f=l[c].getAttribute("class").replace("workshop_partition_content",""),y=l[c].querySelectorAll("form .row"),b=[];if(0!==y.length)for(var v=y.length-1;0<=v;v--){var w=y[v].querySelector("input.workshop-input_number").value,S=y[v].querySelector("textarea.workshop-input_title").value,k=y[v].querySelector("textarea.workshop-input_content").value,_=y[v].querySelector("textarea.workshop-input_notes").value;b[v]={title:S,desc:k,duration:w,note:_}}i[h]={post:p,parent:g,title:m,color:f,steps:b,order:c}}var A=hasClasse(t.target,".publish-post")?t.target:get_closest_parent(t.target,".publish-post"),L=o?o.getContent():"",P=A.dataset.post,T=document.querySelector('header.header-post input[name="title"]').value,q=document.querySelector("body[data-u]").dataset.u,j=void 0!==A.dataset.draft?A.dataset.draft:0,I=wpApiSettings.root+"publish-post/",C={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({content:L,post:P,title:T,status:j,headlines:n,days:a,entries:i,u:q})};callLoading("on"),fetch(I,C).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){t.data&&200!==t.data.status?toastInit("error_toast",t.message):(toastInit("success_toast",t.message),main.innerHTML=t.html,nav.innerHTML=t.nav,removeClasse(document.querySelector("body"),"fixed-sidebar"),setWindowHistory(t.title,t.perma,I,C),addListener(".get-profile","click",getProfile),addListener("[data-archive]","click",getArchive),addListener(".bookmark","click",bookmarkPost),addListener(".get-post","click",getPost),addListener(".logout","click",logoutUser),addListener(".create-post","click",createPost),avatarInit(),select2dropDown(),bsValidatorInit())}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function deletePost(t){t.preventDefault(),controller&&controller.abort();for(var e=(controller=new AbortController).signal,o=document.getElementById("formDelete").elements,n=document.getElementById("formDelete").dataset.id,r=document.querySelector("body[data-u]").dataset.u,a=document.querySelector('a.remove[data-id="'+n+'"]'),s=wpApiSettings.root+"delete-post/",i={post:n,u:r},l=o.length-1;0<=l;l--)"submit"!==o[l].type&&"search"!==o[l].type&&(i[o[l].name]=o[l].value);var c={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify(i)};callLoading("on"),fetch(s,c).then(function(t){if(callLoading("off","on"),jQuery("#deletePost").modal("hide"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){t.data&&200!==t.data.status?toastInit("error_toast",t.message):(console.log(t),toastInit("success_toast",t.message),get_closest_parent(a,".mz-mb-35").remove())}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function reportPost(t){t.preventDefault(),controller&&controller.abort();for(var e=(controller=new AbortController).signal,o=document.getElementById("formReport").elements,n=document.getElementById("formReport").dataset.id,r=document.querySelector("body[data-u]").dataset.u,a=document.querySelector('a.report-btn[data-id="'+n+'"]'),s=wpApiSettings.root+"report-post/",i={post:n,u:r},l=o.length-1;0<=l;l--)"submit"!==o[l].type&&"search"!==o[l].type&&(i[o[l].name]=o[l].value);var c={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify(i)};callLoading("on"),fetch(s,c).then(function(t){if(callLoading("off","on"),jQuery("#reportPost").modal("hide"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){t.data&&200!==t.data.status?toastInit("error_toast",t.message):(toastInit("success_toast",t.message),a.remove(),document.getElementById("reportPost").remove())}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function getPost(t){t.preventDefault(),t.stopImmediatePropagation(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=hasClasse(t.target,".get-post")?t.target:get_closest_parent(t.target,".get-post"),n=wpApiSettings.root+"post/",r=o.dataset.id,a=o.dataset.c,s=document.querySelector("body[data-u]").dataset.u,i={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({u:s,p:r,c:a})};callLoading("on"),fetch(n,i).then(function(t){if(callLoading("off","on"),t.ok)return t.json();throw new Error(t.statusText)}).then(function(t){if(console.log(t),main.innerHTML=t.html,t.nav&&(nav.innerHTML=t.nav,tinyInit()),setWindowHistory(t.title,t.perma,n,i),addListener(".publish-post","click",publishPost),addListener(".get-post","click",getPost),addListener("[data-t]","click",getTagArchive),1==jQuery('.header-post input[name="title"]').length&&(jQuery("footer").addClass("d-none"),jQuery("body").addClass("fixed-sidebar")),avatarInit(),select2dropDown(),bsValidatorInit(),0<jQuery(".btn-days_wrapper a.tab").length){jQuery(".btn-days_wrapper .btn:not(.tab)").length<1&&jQuery(".btn-days_wrapper a.tab").click();var e=document.querySelectorAll(".workshop-input_content");jQuery.each(e,function(t,e){autoExpand(e)})}0<jQuery(".workshop-input_number").length&&jQuery(".workshop-input_number").trigger("change")}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function addComment(t){t.preventDefault(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=t.target.elements,n=t.target.dataset.post,r=void 0!==t.target.dataset.parent?t.target.dataset.parent:0,a=document.querySelector("body[data-u]").dataset.u,s=wpApiSettings.root+"comment/",i={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({content:o.comment.value,post:n,parent:r,u:a})};callLoading("on"),fetch(s,i).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){t.html&&(o.comment.value="",document.querySelector(".view-content__comments_container").parentNode.replaceChild(document.createRange().createContextualFragment(t.html),document.querySelector(".view-content__comments_container")),avatarInit(),bsValidatorInit()),toastInit("success_toast",t.message)}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function getProfile(t){t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=t.target.hasAttribute("data-p")?t.target:get_closest_parent(t.target,"[data-p]"),n=wpApiSettings.root+"profile/",r=o.dataset.p,a=document.querySelector("body[data-u]").dataset.u,s={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({u:a,p:r})};callLoading("on"),fetch(n,s).then(function(t){if(callLoading("off","on"),t.ok)return t.json();throw new Error(t.statusText)}).then(function(t){console.log(t),addClasse(document.querySelector("body"),"fixed-sidebar"),main.innerHTML=t.html,nav.innerHTML=t.nav,addClasse(main,"bg-mo-gray"),addListener("[data-page]","click",getPage),addListener(".get-profile","click",getProfile),addListener("[data-archive]","click",getArchive),addListener(".bookmark","click",bookmarkPost),addListener(".get-post","click",getPost),addListener(".logout","click",logoutUser),addListener(".create-post","click",createPost),addListener("[data-t]","click",getTagArchive),avatarInit(),select2dropDown(),uppyUpLoader(),bsValidatorInit(),setWindowHistory(t.title,t.perma,n,s),1==jQuery('a[href="#groups"]').length&&(jQuery(document).on("shown.bs.tab",'a[href="#groups"]',function(t){1==jQuery(this).parents(".content-section_header.tabs").find('a[data-target="#newGroup"]').length&&jQuery(this).parents(".content-section_header.tabs").find('a[data-target="#newGroup"]').removeClass("d-none")}),jQuery(document).on("shown.bs.tab",'a[href="#bookmarked"], a[href="#posts"] , a[href="#settings"]',function(t){1==jQuery(this).parents(".content-section_header.tabs").find('a[data-target="#newGroup"]').length&&jQuery(this).parents(".content-section_header.tabs").find('a[data-target="#newGroup"]').addClass("d-none")})),1==jQuery(".update-group").length&&(jQuery(document).on("shown.bs.tab",'a[href="#settings"]',function(t){jQuery(".update-group").removeClass("d-none")}),jQuery(document).on("shown.bs.tab",'a[href="#groups"], a[href="#posts"]',function(t){jQuery(".update-group").addClass("d-none")}))}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function getArchive(t){t.preventDefault(),t.stopImmediatePropagation(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=t.target.hasAttribute("data-archive")?t.target:get_closest_parent(t.target,"[data-archive]"),n=wpApiSettings.root+"archive/",r=o.dataset.archive,a=document.querySelector("body[data-u]").dataset.u,s={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({u:a,archive:r})};callLoading("on"),fetch(n,s).then(function(t){if(callLoading("off","on"),t.ok)return t.json();throw new Error(t.statusText)}).then(function(t){console.log(t),removeClasse(document.querySelector("body"),"fixed-sidebar"),document.querySelector("#nav_wrap .nav-link.active")&&(removeClasse(document.querySelector("body"),"bg-"+document.querySelector("#nav_wrap .nav-link.active").dataset.archive),removeClasse(document.querySelector("#nav_wrap .nav-link.active"),"active")),addClasse(document.querySelector("body"),"bg-"+r),addClasse(document.querySelector("main"),"bg-mo-gray"),addClasse(o,"active"),main.innerHTML=t.html,setWindowHistory(t.title,t.perma,n,s),addListener(".get-profile","click",getProfile),addListener(".bookmark","click",bookmarkPost),addListener(".get-post","click",getPost),addListener("[data-load]","click",loadAllPosts),addListener("[data-t]","click",getTagArchive),avatarInit(),select2dropDown(),bsValidatorInit()}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function loadAllPosts(t){t.preventDefault(),t.stopImmediatePropagation(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=t.target.hasAttribute("data-load")?t.target:get_closest_parent(t.target,"[data-load]"),n=wpApiSettings.root+"load-all/",r="bookmarks"!==o.dataset.load?JSON.parse(o.dataset.load):o.dataset.load,a=!!o.dataset.cat&&JSON.parse(o.dataset.cat),s=document.querySelector("body[data-u]").dataset.u,i={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({u:s,type:r,cat:a})};callLoading("on"),fetch(n,i).then(function(t){if(callLoading("off","on"),t.ok)return t.json();throw new Error(t.statusText)}).then(function(t){console.log(t),get_closest_parent(o,".section-wrapper").querySelector(".row").innerHTML=t.html,jQuery(o).parents(".section-wrapper").siblings(".section-wrapper").remove(),jQuery(o).remove(),addListener(".get-profile","click",getProfile),addListener(".bookmark","click",bookmarkPost),addListener(".get-post","click",getPost),addListener("[data-t]","click",getTagArchive),avatarInit()}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function bookmarkPost(t){t.preventDefault(),t.stopImmediatePropagation(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=hasClasse(t.target,"bookmark")?t.target:get_closest_parent(t.target,".bookmark"),n=!hasClasse(get_closest_parent(o,".card"),"bookmarked"),r=wpApiSettings.root+"bookmark/",a=o.dataset.b,s=document.querySelector("body[data-u]").dataset.u,i={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({u:s,b:a,action:n})};callLoading("on"),fetch(r,i).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){t.data&&200!==t.data.status?toastInit("error_toast",t.message):(n?addClasse(get_closest_parent(o,".card"),"bookmarked"):(removeClasse(get_closest_parent(o,".card"),"bookmarked"),get_closest_parent(o,".col-md-6").remove()),toastInit("success_toast",t.message))}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function getSearch(t){t.preventDefault(),controller&&controller.abort();for(var e=(controller=new AbortController).signal,o=t.target.elements,n=document.querySelector("body[data-u]").dataset.u,r=wpApiSettings.root+"search/",a=[],s={u:n},i=o.length-1;0<=i;i--)"submit"!==o[i].type&&"checkbox"!==o[i].type&&(s[o[i].name]=o[i].value),"checkbox"==o[i].type&&o[i].checked&&"all"!==o[i].value&&a.push(o[i].value);s.types=a;var l={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify(s)};callLoading("on"),fetch(r,l).then(function(t){if(callLoading("off","on"),t.ok)return t.json();throw new Error(t.statusText)}).then(function(t){console.log(t),main.innerHTML=t.html,setWindowHistory(t.title,t.perma,r,l),addListener(".get-profile","click",getProfile),addListener(".bookmark","click",bookmarkPost),addListener(".get-post","click",getPost),avatarInit()}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function getTagArchive(t){t.preventDefault(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=(t.target.hasAttribute("data-t")?t.target:get_closest_parent(t.target,"[data-t]")).dataset.t,n=document.querySelector("body[data-u]").dataset.u,r=wpApiSettings.root+"get-tag/",a={method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({u:n,tag:o})};callLoading("on"),fetch(r,a).then(function(t){if(callLoading("off","on"),t.ok)return t.json();throw new Error(t.statusText)}).then(function(t){console.log(t),main.innerHTML=t.html,setWindowHistory(t.title,t.perma,r,a),addListener(".get-profile","click",getProfile),addListener(".bookmark","click",bookmarkPost),addListener(".get-post","click",getPost),addListener("[data-t]","click",getTagArchive),avatarInit()}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function updateUser(t){t.preventDefault(),t.stopImmediatePropagation(),controller&&controller.abort();var e=(controller=new AbortController).signal,o=t.target,n=new FormData;n.append("u",document.querySelector("body[data-u]").dataset.u),n.append("fullname",o.querySelector('input[name="fullname"]').value),n.append("email",o.querySelector('input[name="email"]').value),n.append("bdate",o.querySelector('input[name="bdate"]').value),n.append("desc",o.querySelector('textarea[name="desc"]').value),window.userPhoto&&0!==window.userPhoto.getFiles().length?n.append("userPhoto",window.userPhoto.getFiles()[0].data):n.append("userPhoto",!1);document.querySelector("body[data-u]").dataset.u;var r=wpApiSettings.root+"update-user/";fetch(r,{method:"POST",mode:"same-origin",credentials:"same-origin",signal:e,body:n}).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){toastInit("success_toast",t.message),console.log(t)}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}function notifiReadAll(e){e.preventDefault(),e.stopImmediatePropagation(),controller&&controller.abort();var t=(controller=new AbortController).signal,o=document.querySelector("body[data-u]").dataset.u,n=wpApiSettings.root+"read-notification/",r={method:"POST",mode:"same-origin",credentials:"same-origin",signal:t,headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},body:JSON.stringify({u:o})};fetch(n,r).then(function(t){if(callLoading("off","on"),500==t.status)throw new Error(t.statusText);return t.json()}).then(function(t){jQuery(e.target).siblings(".dropdown-notifitctions").find(".dropdown-item ").addClass("seen")}).catch(function(t){"AbortError"!==t.name&&(console.log(t),toastInit("error_toast",t))})}domready(function(){window.addEventListener("popstate",function(t){window.location.reload()}),function(){for(var t=document.querySelectorAll("[data-page]"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",getPage)}(),function(){for(var t=document.querySelectorAll(".create-post"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",createPost)}(),function(){for(var t=document.querySelectorAll("#settings .btn.btn-secondary"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",accSetting)}(),function(){for(var t=document.querySelectorAll(".publish-post"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",publishPost)}(),function(){for(var t=document.querySelectorAll(".get-profile"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",getProfile)}(),function(){for(var t=document.querySelectorAll("[data-archive]"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",getArchive)}(),function(){for(var t=document.querySelectorAll(".bookmark"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",bookmarkPost)}(),function(){for(var t=document.querySelectorAll(".get-post"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",getPost)}(),function(){for(var t=document.querySelectorAll(".logout"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",logoutUser)}(),function(){for(var t=document.querySelectorAll("[data-load]"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",loadAllPosts)}(),function(){for(var t=document.querySelectorAll("[data-t]"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",getTagArchive)}(),function(){for(var t=document.querySelectorAll(".read-all"),e=t.length-1;0<=e;e--)t[e].addEventListener("click",notifiReadAll)}()});